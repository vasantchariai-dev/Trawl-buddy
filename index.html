<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Food trawl buddy</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --whale-blue: #4A90B8;
    --whale-dark: #2C5F7C;
    --text-dark: #2C3E50;
    --text-mid: #5D6D7E;
    --bg: #FDF6F0;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: var(--text-dark);
    min-height: 100vh;
    overflow-x: hidden;
  }

  header {
    text-align: center;
    padding: 2rem 1rem 0.5rem;
  }

  header h1 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: clamp(2rem, 5vw, 3.2rem);
    font-weight: 700;
    color: var(--text-dark);
    letter-spacing: -0.02em;
  }

  header p {
    font-size: 0.95rem;
    color: var(--text-mid);
    margin-top: 0.3rem;
    font-weight: 300;
  }

  /* ---- Animated hero ---- */
  .hero {
    width: 100%;
    overflow: hidden;
    padding: 0.5rem 0;
    position: relative;
    height: 160px;
  }

  .hero svg {
    width: 3600px;
    height: 150px;
    position: absolute;
    top: 5px;
    left: 0;
    animation: swim 18s linear infinite;
  }

  /* 3 whales across ~1800px, duplicated for seamless loop.
     Strip slides left so whales visually travel left to right. */
  @keyframes swim {
    from { transform: translateX(0); }
    to   { transform: translateX(-1800px); }
  }

  /* ---- Spinner section ---- */
  .spinner-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem 1rem 3rem;
  }

  .spinner-container {
    position: relative;
    width: min(85vw, 420px);
    height: min(85vw, 420px);
  }

  .spinner-pointer {
    position: absolute;
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
  }

  canvas#wheel {
    width: 100%;
    height: 100%;
    cursor: pointer;
    border-radius: 50%;
    box-shadow: 0 8px 32px rgba(44, 95, 124, 0.15), 0 2px 8px rgba(0,0,0,0.08);
    transition: box-shadow 0.3s;
  }

  canvas#wheel:hover {
    box-shadow: 0 8px 40px rgba(44, 95, 124, 0.25), 0 2px 12px rgba(0,0,0,0.12);
  }

  .spin-btn {
    margin-top: 1.5rem;
    padding: 0.85rem 2.8rem;
    font-family: 'Inter', sans-serif;
    font-size: 1.05rem;
    font-weight: 600;
    color: #fff;
    background: linear-gradient(135deg, var(--whale-blue), var(--whale-dark));
    border: none;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(44, 95, 124, 0.3);
    transition: transform 0.2s, box-shadow 0.2s;
    letter-spacing: 0.02em;
  }

  .spin-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(44, 95, 124, 0.4);
  }

  .spin-btn:active { transform: translateY(0); }

  .spin-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }

  /* ---- Result display ---- */
  .result {
    margin-top: 1.5rem;
    text-align: center;
    min-height: 3.5rem;
  }

  .result-text {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: clamp(1.4rem, 4vw, 2rem);
    font-weight: 700;
    color: var(--whale-dark);
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.5s, transform 0.5s;
  }

  .result-text.show {
    opacity: 1;
    transform: translateY(0);
  }

  .result-sub {
    font-size: 0.85rem;
    color: var(--text-mid);
    margin-top: 0.25rem;
    opacity: 0;
    transition: opacity 0.5s 0.2s;
  }

  .result-sub.show { opacity: 1; }

  footer {
    text-align: center;
    padding: 2rem 1rem;
    font-size: 0.8rem;
    color: var(--text-mid);
    opacity: 0.6;
  }

  @media (max-width: 480px) {
    header { padding: 1.5rem 1rem 0.3rem; }
    .hero { height: 120px; }
    .hero svg { height: 110px; }
    .spinner-section { padding: 0.5rem 1rem 2rem; }
    .spin-btn { padding: 0.75rem 2.2rem; font-size: 1rem; }
  }
</style>
</head>
<body>

<header>
  <h1>Food trawl buddy</h1>
  <p>Spin the wheel, find your feast</p>
</header>

<!-- Hero: three whales swimming left to right, looping -->
<div class="hero">
  <svg viewBox="0 0 3600 150" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Three whales trawling fish across the screen">
    <defs>
      <linearGradient id="wg1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#5DADE2"/>
        <stop offset="100%" stop-color="#2C5F7C"/>
      </linearGradient>
      <linearGradient id="wg2" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#76C7E8"/>
        <stop offset="100%" stop-color="#3A7CA5"/>
      </linearGradient>
      <linearGradient id="wg3" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#6BC0D4"/>
        <stop offset="100%" stop-color="#2E7A91"/>
      </linearGradient>

      <!-- Reusable fish -->
      <g id="fish1">
        <ellipse cx="0" cy="0" rx="7" ry="3.5" fill="#F5B041"/>
        <polygon points="7,-1 12,-4.5 12,4.5 7,1" fill="#F5B041"/>
        <circle cx="-3" cy="-0.8" r="0.8" fill="#2C3E50"/>
      </g>
      <g id="fish2">
        <ellipse cx="0" cy="0" rx="6" ry="3" fill="#E8B960"/>
        <polygon points="6,-0.8 10,-4 10,4 6,0.8" fill="#E8B960"/>
        <circle cx="-2.5" cy="-0.7" r="0.7" fill="#2C3E50"/>
      </g>
      <g id="fish3">
        <ellipse cx="0" cy="0" rx="5.5" ry="2.8" fill="#F0C36D"/>
        <polygon points="5.5,-0.7 9,-3.5 9,3.5 5.5,0.7" fill="#F0C36D"/>
        <circle cx="-2" cy="-0.6" r="0.6" fill="#2C3E50"/>
      </g>

      <!-- Reusable whale facing RIGHT with open mouth -->
      <g id="whale-body-r">
        <!-- Main body -->
        <path d="M 0,55 Q 8,15 48,8 Q 72,1 96,6 Q 120,12 136,28 L 148,44 L 148,68 L 136,84 Q 120,100 96,106 Q 72,110 48,104 Q 8,95 0,55 Z"/>
        <!-- Upper jaw -->
        <path d="M 136,28 L 160,34 L 160,40 L 148,44 Z"/>
        <!-- Lower jaw -->
        <path d="M 148,68 L 160,72 L 160,78 L 136,84 Z"/>
        <!-- Mouth interior -->
        <path d="M 148,44 L 160,40 L 160,72 L 148,68 Z" fill="#1A3A4F" opacity="0.5"/>
        <!-- Tail flukes -->
        <path d="M 0,55 Q -12,36 -24,24 Q -16,40 -20,55 Q -16,70 -24,86 Q -12,74 0,55 Z"/>
        <!-- Eye -->
        <circle cx="116" cy="40" r="4" fill="#1A3A4F"/>
        <circle cx="117" cy="39" r="1.2" fill="#fff"/>
        <!-- Fin -->
        <path d="M 64,104 Q 72,124 56,132 Q 52,120 64,104 Z" opacity="0.7"/>
        <!-- Belly lines -->
        <line x1="48" y1="72" x2="112" y2="70" stroke="#fff" stroke-width="0.6" opacity="0.2"/>
        <line x1="44" y1="80" x2="108" y2="78" stroke="#fff" stroke-width="0.6" opacity="0.2"/>
        <line x1="48" y1="88" x2="100" y2="86" stroke="#fff" stroke-width="0.6" opacity="0.2"/>
      </g>
    </defs>

      <!-- ===== SET 1 (positions 0-1800) ===== -->

      <!-- WHALE 1: bald bearded man ‚Äî positioned at x=80 -->
      <g transform="translate(80, 10)">
        <use href="#whale-body-r" fill="url(#wg1)"/>
        <!-- Bald head + beard silhouette -->
        <g opacity="0.18" fill="#1A3A4F">
          <ellipse cx="88" cy="14" rx="24" ry="13"/>
          <rect x="74" y="14" width="28" height="22" rx="4"/>
          <path d="M 74,30 Q 72,44 80,48 Q 88,51 96,48 Q 102,44 102,30 Z"/>
          <ellipse cx="71" cy="26" rx="3" ry="5"/>
          <ellipse cx="105" cy="26" rx="3" ry="5"/>
        </g>
        <!-- Fish being trawled into mouth -->
        <use href="#fish1" transform="translate(172,48) scale(0.8)"/>
        <use href="#fish2" transform="translate(185,38) scale(0.7)"/>
        <use href="#fish3" transform="translate(180,60) scale(0.65)"/>
        <use href="#fish1" transform="translate(195,52) scale(0.6)"/>
        <!-- Bubbles -->
        <circle cx="170" cy="24" r="2" fill="#AED6F1" opacity="0.35"/>
        <circle cx="178" cy="18" r="1.3" fill="#AED6F1" opacity="0.3"/>
      </g>

      <!-- WHALE 2: woman with dark hair ‚Äî positioned at x=600 -->
      <g transform="translate(600, 20)">
        <use href="#whale-body-r" fill="url(#wg2)"/>
        <!-- Woman hair silhouette -->
        <g opacity="0.18" fill="#1A3A4F">
          <ellipse cx="88" cy="12" rx="26" ry="15"/>
          <path d="M 62,12 Q 58,24 59,40 Q 62,32 66,24 Z"/>
          <path d="M 114,12 Q 118,24 117,40 Q 114,32 110,24 Z"/>
          <ellipse cx="88" cy="26" rx="15" ry="11"/>
        </g>
        <!-- Fish -->
        <use href="#fish2" transform="translate(170,44) scale(0.75)"/>
        <use href="#fish3" transform="translate(182,56) scale(0.7)"/>
        <use href="#fish1" transform="translate(190,40) scale(0.55)"/>
        <use href="#fish2" transform="translate(198,50) scale(0.6)"/>
        <use href="#fish3" transform="translate(175,64) scale(0.5)"/>
        <!-- Bubbles -->
        <circle cx="165" cy="16" r="1.8" fill="#AED6F1" opacity="0.35"/>
        <circle cx="172" cy="10" r="1.2" fill="#AED6F1" opacity="0.3"/>
      </g>

      <!-- WHALE 3: baby whale (smaller, no silhouette) ‚Äî positioned at x=1150 -->
      <g transform="translate(1150, 30) scale(0.8)">
        <use href="#whale-body-r" fill="url(#wg3)"/>
        <!-- Fish -->
        <use href="#fish3" transform="translate(168,46) scale(0.7)"/>
        <use href="#fish1" transform="translate(178,54) scale(0.55)"/>
        <use href="#fish2" transform="translate(186,42) scale(0.6)"/>
        <!-- Bubbles -->
        <circle cx="160" cy="20" r="1.5" fill="#AED6F1" opacity="0.35"/>
        <circle cx="166" cy="14" r="1" fill="#AED6F1" opacity="0.3"/>
      </g>

      <!-- Scattered extra fish between whales -->
      <use href="#fish1" transform="translate(360, 60) scale(0.6)"/>
      <use href="#fish3" transform="translate(420, 40) scale(0.5)"/>
      <use href="#fish2" transform="translate(480, 70) scale(0.55)"/>
      <use href="#fish1" transform="translate(900, 50) scale(0.5)"/>
      <use href="#fish2" transform="translate(960, 65) scale(0.6)"/>
      <use href="#fish3" transform="translate(1020, 45) scale(0.5)"/>
      <use href="#fish1" transform="translate(1450, 55) scale(0.55)"/>
      <use href="#fish2" transform="translate(1520, 40) scale(0.5)"/>
      <use href="#fish3" transform="translate(1580, 68) scale(0.6)"/>
      <use href="#fish1" transform="translate(1660, 50) scale(0.5)"/>

      <!-- ===== SET 2 (duplicate shifted +1800 for seamless loop) ===== -->

      <g transform="translate(1880, 10)">
        <use href="#whale-body-r" fill="url(#wg1)"/>
        <g opacity="0.18" fill="#1A3A4F">
          <ellipse cx="88" cy="14" rx="24" ry="13"/>
          <rect x="74" y="14" width="28" height="22" rx="4"/>
          <path d="M 74,30 Q 72,44 80,48 Q 88,51 96,48 Q 102,44 102,30 Z"/>
          <ellipse cx="71" cy="26" rx="3" ry="5"/>
          <ellipse cx="105" cy="26" rx="3" ry="5"/>
        </g>
        <use href="#fish1" transform="translate(172,48) scale(0.8)"/>
        <use href="#fish2" transform="translate(185,38) scale(0.7)"/>
        <use href="#fish3" transform="translate(180,60) scale(0.65)"/>
        <use href="#fish1" transform="translate(195,52) scale(0.6)"/>
        <circle cx="170" cy="24" r="2" fill="#AED6F1" opacity="0.35"/>
        <circle cx="178" cy="18" r="1.3" fill="#AED6F1" opacity="0.3"/>
      </g>

      <g transform="translate(2400, 20)">
        <use href="#whale-body-r" fill="url(#wg2)"/>
        <g opacity="0.18" fill="#1A3A4F">
          <ellipse cx="88" cy="12" rx="26" ry="15"/>
          <path d="M 62,12 Q 58,24 59,40 Q 62,32 66,24 Z"/>
          <path d="M 114,12 Q 118,24 117,40 Q 114,32 110,24 Z"/>
          <ellipse cx="88" cy="26" rx="15" ry="11"/>
        </g>
        <use href="#fish2" transform="translate(170,44) scale(0.75)"/>
        <use href="#fish3" transform="translate(182,56) scale(0.7)"/>
        <use href="#fish1" transform="translate(190,40) scale(0.55)"/>
        <use href="#fish2" transform="translate(198,50) scale(0.6)"/>
        <use href="#fish3" transform="translate(175,64) scale(0.5)"/>
        <circle cx="165" cy="16" r="1.8" fill="#AED6F1" opacity="0.35"/>
        <circle cx="172" cy="10" r="1.2" fill="#AED6F1" opacity="0.3"/>
      </g>

      <g transform="translate(2950, 30) scale(0.8)">
        <use href="#whale-body-r" fill="url(#wg3)"/>
        <use href="#fish3" transform="translate(168,46) scale(0.7)"/>
        <use href="#fish1" transform="translate(178,54) scale(0.55)"/>
        <use href="#fish2" transform="translate(186,42) scale(0.6)"/>
        <circle cx="160" cy="20" r="1.5" fill="#AED6F1" opacity="0.35"/>
        <circle cx="166" cy="14" r="1" fill="#AED6F1" opacity="0.3"/>
      </g>

      <use href="#fish1" transform="translate(2160, 60) scale(0.6)"/>
      <use href="#fish3" transform="translate(2220, 40) scale(0.5)"/>
      <use href="#fish2" transform="translate(2280, 70) scale(0.55)"/>
      <use href="#fish1" transform="translate(2700, 50) scale(0.5)"/>
      <use href="#fish2" transform="translate(2760, 65) scale(0.6)"/>
      <use href="#fish3" transform="translate(2820, 45) scale(0.5)"/>
      <use href="#fish1" transform="translate(3250, 55) scale(0.55)"/>
      <use href="#fish2" transform="translate(3320, 40) scale(0.5)"/>
      <use href="#fish3" transform="translate(3380, 68) scale(0.6)"/>
      <use href="#fish1" transform="translate(3460, 50) scale(0.5)"/>

  </svg>
</div>

<!-- Spinner -->
<section class="spinner-section">
  <div class="spinner-container">
    <svg class="spinner-pointer" width="36" height="28" viewBox="0 0 36 28">
      <polygon points="18,28 4,0 32,0" fill="var(--whale-dark)" stroke="#fff" stroke-width="1.5"/>
    </svg>
    <canvas id="wheel" width="840" height="840"></canvas>
  </div>

  <button class="spin-btn" id="spinBtn" onclick="spin()">Spin the wheel</button>

  <div class="result">
    <div class="result-text" id="resultText"></div>
    <div class="result-sub" id="resultSub"></div>
  </div>
</section>

<footer>
  Made with appetite &mdash; Food trawl buddy
</footer>

<script>
(function () {
  // ---- Food options ----
  const options = [
    { label: 'P√∏lser',                    emoji: 'üå≠', color: '#FADBD8' },
    { label: 'Burgers',                   emoji: 'üçî', color: '#FDDCB5' },
    { label: 'Itty bitty Swedish things', emoji: 'üá∏üá™', color: '#D6EAF8' },
    { label: 'Sourdough pancakes',        emoji: 'ü•û', color: '#D4EDDA' },
    { label: 'Slow-cooker!',              emoji: 'üç≤', color: '#E8DAEF' },
    { label: 'All you can eat brunch',    emoji: 'ü•Ç', color: '#FEF9E7' },
    { label: 'Sm√∏rrebr√∏d',                emoji: 'üçû', color: '#D5E8D4' },
  ];

  const subtitles = {
    'P√∏lser':                    'Danish hotdogs ‚Äî r√∏d p√∏lse!',
    'Burgers':                   'Obviously',
    'Itty bitty Swedish things': 'Sm√• r√§tter, stor gl√§dje',
    'Sourdough pancakes':        'Fermented & fluffy',
    'Slow-cooker!':              'Set it and forget it',
    'All you can eat brunch':    'No limits, no regrets',
    'Sm√∏rrebr√∏d':                'Danish open sandwiches',
  };

  const n = options.length;
  const arc = (2 * Math.PI) / n;

  const canvas = document.getElementById('wheel');
  const ctx = canvas.getContext('2d');
  const size = canvas.width;
  const cx = size / 2;
  const cy = size / 2;
  const radius = cx - 10;

  let currentAngle = 0;
  let spinning = false;

  function draw() {
    ctx.clearRect(0, 0, size, size);

    ctx.save();
    ctx.beginPath();
    ctx.arc(cx, cy, radius + 4, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(44, 95, 124, 0.08)';
    ctx.fill();
    ctx.restore();

    for (let i = 0; i < n; i++) {
      const startAngle = currentAngle + i * arc - Math.PI / 2;
      const endAngle = startAngle + arc;

      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.arc(cx, cy, radius, startAngle, endAngle);
      ctx.closePath();
      ctx.fillStyle = options[i].color;
      ctx.fill();
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 3;
      ctx.stroke();

      // Label
      ctx.save();
      ctx.translate(cx, cy);
      ctx.rotate(startAngle + arc / 2);
      ctx.textAlign = 'right';
      ctx.fillStyle = '#2C3E50';

      // Shrink font for longer labels
      const label = options[i].label;
      const fontSize = label.length > 16 ? 20 : label.length > 10 ? 24 : 28;
      ctx.font = 'bold ' + fontSize + 'px Inter, sans-serif';
      ctx.fillText(label, radius - 50, 4);

      ctx.font = '32px sans-serif';
      ctx.fillText(options[i].emoji, radius - 14, 6);
      ctx.restore();
    }

    // Centre circle
    ctx.beginPath();
    ctx.arc(cx, cy, 44, 0, 2 * Math.PI);
    ctx.fillStyle = '#fff';
    ctx.fill();
    ctx.strokeStyle = '#E8DAEF';
    ctx.lineWidth = 3;
    ctx.stroke();

    ctx.beginPath();
    ctx.arc(cx, cy, 38, 0, 2 * Math.PI);
    const cg = ctx.createRadialGradient(cx, cy, 5, cx, cy, 38);
    cg.addColorStop(0, '#5DADE2');
    cg.addColorStop(1, '#2C5F7C');
    ctx.fillStyle = cg;
    ctx.fill();

    ctx.fillStyle = '#fff';
    ctx.font = '28px sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('üç¥', cx, cy + 1);

    ctx.beginPath();
    ctx.arc(cx, cy, radius, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(44, 95, 124, 0.12)';
    ctx.lineWidth = 5;
    ctx.stroke();
  }

  draw();

  // ---- Audio ----
  let audioCtx = null;
  function playDing() {
    try {
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.type = 'sine';
      osc.frequency.setValueAtTime(880, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(440, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
      osc.start(audioCtx.currentTime);
      osc.stop(audioCtx.currentTime + 0.5);
    } catch (e) {}
  }

  function playTick() {
    try {
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.type = 'sine';
      osc.frequency.setValueAtTime(1200, audioCtx.currentTime);
      gain.gain.setValueAtTime(0.06, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.04);
      osc.start(audioCtx.currentTime);
      osc.stop(audioCtx.currentTime + 0.04);
    } catch (e) {}
  }

  // ---- Spin logic ----
  window.spin = function () {
    if (spinning) return;
    spinning = true;

    const btn = document.getElementById('spinBtn');
    btn.disabled = true;
    btn.textContent = 'Spinning...';

    const rt = document.getElementById('resultText');
    const rs = document.getElementById('resultSub');
    rt.classList.remove('show');
    rs.classList.remove('show');

    const totalRotation = (5 + Math.random() * 4) * 2 * Math.PI + Math.random() * 2 * Math.PI;
    const duration = 4000 + Math.random() * 1500;
    const startAngle = currentAngle;
    const startTime = performance.now();

    let lastSegment = -1;

    function animate(now) {
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const eased = 1 - Math.pow(1 - progress, 3);
      currentAngle = startAngle + totalRotation * eased;

      draw();

      const normalised = ((currentAngle % (2 * Math.PI)) + 2 * Math.PI) % (2 * Math.PI);
      const currentSeg = Math.floor(normalised / arc);
      if (currentSeg !== lastSegment) {
        lastSegment = currentSeg;
        if (progress < 0.95) playTick();
      }

      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        const finalAngle = ((currentAngle % (2 * Math.PI)) + 2 * Math.PI) % (2 * Math.PI);
        const pointerInWheel = ((2 * Math.PI - finalAngle) % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
        const winnerIndex = Math.floor(pointerInWheel / arc) % n;

        playDing();

        rt.textContent = options[winnerIndex].emoji + ' ' + options[winnerIndex].label;
        rs.textContent = subtitles[options[winnerIndex].label];

        setTimeout(() => { rt.classList.add('show'); }, 100);
        setTimeout(() => { rs.classList.add('show'); }, 300);

        btn.disabled = false;
        btn.textContent = 'Spin again';
        spinning = false;
      }
    }

    requestAnimationFrame(animate);
  };

  canvas.addEventListener('click', function () {
    if (!spinning) window.spin();
  });
})();
</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js').catch(function () {});
}
</script>

</body>
</html>
